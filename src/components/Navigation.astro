---
import Logo from './Logo.astro';

interface Props {
  currentPage?: 'home' | 'now' | 'uses' | 'projects';
}

const { currentPage = 'home' } = Astro.props;

const navLinks = [
  { href: currentPage === 'home' ? '#about' : '/#about', label: 'About', active: false },
  { href: currentPage === 'home' ? '#work' : '/#work', label: 'Work', active: false },
  { href: currentPage === 'home' ? '#publications' : '/#publications', label: 'Publications', active: false },
  { href: '/now', label: 'Now', active: currentPage === 'now' },
  { href: '/uses', label: 'Uses', active: currentPage === 'uses' },
];
---

<!-- Skip to content (accessibility) -->
<a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[60] focus:px-4 focus:py-2 focus:bg-grayblue-600 focus:text-white focus:rounded-lg">
  Skip to content
</a>

<!-- Navigation -->
<nav class="fixed top-0 left-0 right-0 z-50 px-6 py-4 backdrop-blur-md bg-grayblue-950/80 border-b border-white/[0.05]">
  <div class="max-w-4xl mx-auto flex items-center justify-between">
    <a href="/" class="text-grayblue-100 hover:text-white transition-colors" aria-label="Home">
      <Logo size={36} />
    </a>

    <!-- Desktop Nav -->
    <div class="hidden md:flex items-center gap-6 text-sm">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class:list={[
            "transition-colors",
            link.active ? "text-grayblue-100" : "text-grayblue-400 hover:text-grayblue-100"
          ]}
        >
          {link.label}
        </a>
      ))}
      <button id="cmd-k-hint" class="text-grayblue-500 hover:text-grayblue-300 transition-colors text-xs flex items-center gap-1 px-2 py-1 rounded border border-grayblue-700/50 hover:border-grayblue-600/50">
        <kbd class="font-mono">âŒ˜K</kbd>
      </button>
    </div>

    <!-- Mobile Menu Button -->
    <button id="mobile-menu-btn" class="md:hidden p-2 text-grayblue-400 hover:text-grayblue-100 transition-colors" aria-label="Open menu">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="md:hidden hidden absolute top-full left-0 right-0 bg-grayblue-950/95 backdrop-blur-md border-b border-white/[0.05] px-6 py-4">
    <div class="flex flex-col gap-4">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class:list={[
            "py-2 transition-colors",
            link.active ? "text-grayblue-100" : "text-grayblue-300 hover:text-grayblue-100"
          ]}
        >
          {link.label}
        </a>
      ))}
    </div>
  </div>
</nav>
